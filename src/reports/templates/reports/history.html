{% extends "base.html" %}

{% block title %}Historique des comparaisons - Tenable Report Analyser{% endblock %}

{% block content %}
<div class="flex items-center justify-between mb-6">
  <div>
    <h1 class="text-xl font-semibold text-white">Historique des comparaisons</h1>
    <p class="text-sm text-slate-300">
      Liste des paires de rapports Tenable déjà analysées, avec consultation ultérieure des résultats.
    </p>
  </div>
  <a
    href="{% url 'reports:upload' %}"
    class="text-xs font-semibold text-tenable-lucid hover:text-white border border-tenable-saber rounded-lg px-3 py-1.5 bg-tenable-navy/60 hover:bg-tenable-saber/20"
  >
    ⟵ Nouvelle comparaison
  </a>
</div>

{% if comparisons %}
  <div class="space-y-3">
    {% for c in comparisons %}
      <a
        href="{% url 'reports:comparison_detail' c.pk %}"
        class="block bg-tenable-navy/80 border border-slate-800 rounded-2xl px-4 py-3 hover:border-tenable-saber/60 hover:bg-tenable-midnight/60 transition-colors"
      >
        <div class="flex items-center justify-between gap-4">
          <div class="text-sm">
            <div class="font-semibold text-slate-100">
              {{ c.old_name|default:"Ancien rapport" }}
              <span class="text-tenable-lucid/70 text-xs">→</span>
              {{ c.new_name|default:"Nouveau rapport" }}
            </div>
            <div class="text-[11px] text-slate-400 mt-1">
              Créée le {{ c.created_at|date:"d/m/Y H:i" }}
            </div>
          </div>
          <div class="flex items-center gap-2 text-[11px] text-slate-300">
            <span class="px-2 py-1 rounded-full bg-tenable-saber/10 border border-tenable-saber/40">
              ID #{{ c.pk }}
            </span>
            <span class="px-2 py-1 rounded-full bg-tenable-midnight/80 border border-slate-700/70">
              Voir le détail
            </span>
          </div>
        </div>
      </a>
    {% endfor %}
  </div>
{% else %}
  <div class="bg-tenable-navy/80 border border-slate-800 rounded-2xl px-4 py-4 text-sm text-slate-300">
    Aucune comparaison enregistrée pour le moment. Lancez une première analyse depuis l’écran d’upload.
  </div>
{% endif %}
{% endblock %}

